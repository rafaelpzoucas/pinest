import { Island } from '@/components/island'
import type { Metadata } from 'next'

import { CartProductType } from '@/models/cart'
import { getCart } from '../cart/actions'
import { Search } from './search'
import { ShoppingBag } from './shopping-bag'

export const metadata: Metadata = {
  title: 'Create Next App',
  description: 'Generated by create next app',
}

export default async function StoreLayout({
  header,
  promotions,
  topSellers,
  productsList,
}: {
  header: React.ReactNode
  promotions: React.ReactNode
  topSellers: React.ReactNode
  productsList: React.ReactNode
}) {
  const bagItems: CartProductType[] = await getCart()

  return (
    <main className="pb-20">
      {header}

      <Search />

      {promotions}

      {topSellers}

      {productsList}

      <Island>
        <ShoppingBag products={bagItems} />
      </Island>
    </main>
  )
}
